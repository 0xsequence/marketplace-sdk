{"version":3,"file":"waitForTransactionReceipt-DZfpS-xw.js","names":[],"sources":["../src/react/utils/waitForTransactionReceipt.ts"],"sourcesContent":["import type { TransactionReceipt } from '@0xsequence/indexer';\nimport {\n\ttype Hex,\n\tTransactionReceiptNotFoundError,\n\tWaitForTransactionReceiptTimeoutError,\n} from 'viem';\nimport type { SdkConfig } from '../../types';\nimport { getIndexerClient } from '../_internal/api';\n\nconst ONE_MIN = 60 * 1000;\nconst THREE_MIN = 3 * ONE_MIN;\n\nexport const waitForTransactionReceipt = async ({\n\ttxHash,\n\tchainId,\n\tsdkConfig,\n\ttimeout = THREE_MIN,\n}: {\n\ttxHash: Hex;\n\tchainId: number;\n\tsdkConfig: SdkConfig;\n\ttimeout?: number;\n}): Promise<TransactionReceipt> => {\n\tconst indexer = getIndexerClient(chainId, sdkConfig);\n\treturn Promise.race([\n\t\tnew Promise<TransactionReceipt>((resolve, reject) => {\n\t\t\tindexer.subscribeReceipts(\n\t\t\t\t{\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\ttxnHash: txHash,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tonMessage: ({ receipt }) => {\n\t\t\t\t\t\tresolve(receipt);\n\t\t\t\t\t},\n\t\t\t\t\tonError: () => {\n\t\t\t\t\t\treject(TransactionReceiptNotFoundError);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}),\n\t\tnew Promise<TransactionReceipt>((_, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\treject(WaitForTransactionReceiptTimeoutError);\n\t\t\t}, timeout);\n\t\t}),\n\t]);\n};\n"],"mappings":";;;;AASA,MAAM,UAAU,KAAK;AACrB,MAAM,YAAY,IAAI;AAEtB,MAAa,4BAA4B,OAAO,EAC/C,QACA,SACA,WACA,UAAU,WAMV,KAAkC;CAClC,MAAM,UAAU,iBAAiB,SAAS,UAAU;AACpD,QAAO,QAAQ,KAAK,CACnB,IAAI,QAA4B,CAAC,SAAS,WAAW;AACpD,UAAQ,kBACP,EACC,QAAQ,EACP,SAAS,OACT,EACD,GACD;GACC,WAAW,CAAC,EAAE,SAAS,KAAK;AAC3B,YAAQ,QAAQ;GAChB;GACD,SAAS,MAAM;AACd,WAAO,gCAAgC;GACvC;EACD,EACD;CACD,IACD,IAAI,QAA4B,CAAC,GAAG,WAAW;AAC9C,aAAW,MAAM;AAChB,UAAO,sCAAsC;EAC7C,GAAE,QAAQ;CACX,EACD,EAAC;AACF"}