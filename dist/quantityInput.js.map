{"version":3,"file":"quantityInput.js","names":["nextQuantity: bigint","cn"],"sources":["../src/react/ui/modals/_internal/components/quantityInput/index.tsx"],"sourcesContent":["'use client';\n\nimport {\n\tAddIcon,\n\tField,\n\tFieldLabel,\n\tIconButton,\n\tNumericInput,\n\tSubtractIcon,\n} from '@0xsequence/design-system';\nimport { useState } from 'react';\nimport { cn } from '../../../../../../utils';\n\ntype QuantityInputProps = {\n\tquantity: bigint;\n\tinvalidQuantity: boolean;\n\tonQuantityChange: (quantity: bigint) => void;\n\tonInvalidQuantityChange: (invalid: boolean) => void;\n\tmaxQuantity: bigint;\n\tclassName?: string;\n\tdisabled?: boolean;\n};\n\nconst MIN_QUANTITY = 1n;\n\nexport default function QuantityInput({\n\tquantity,\n\tinvalidQuantity,\n\tonQuantityChange,\n\tonInvalidQuantityChange,\n\tmaxQuantity,\n\tclassName,\n\tdisabled,\n}: QuantityInputProps) {\n\tconst maxBelowMin = maxQuantity < MIN_QUANTITY;\n\tconst [draftQuantity, setDraftQuantity] = useState<string | null>(null);\n\n\tconst displayQuantity = draftQuantity ?? quantity.toString();\n\n\tconst setValidQuantity = (value: bigint) => {\n\t\tsetDraftQuantity(null);\n\t\tonQuantityChange(value);\n\t\tonInvalidQuantityChange(false);\n\t};\n\n\tfunction handleChangeQuantity(value: string) {\n\t\tif (maxBelowMin) {\n\t\t\tsetDraftQuantity(value);\n\t\t\tonInvalidQuantityChange(true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet nextQuantity: bigint;\n\t\ttry {\n\t\t\tnextQuantity = BigInt(value);\n\t\t} catch {\n\t\t\tsetDraftQuantity(value);\n\t\t\tonInvalidQuantityChange(true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (nextQuantity < MIN_QUANTITY) {\n\t\t\tsetDraftQuantity(value);\n\t\t\tonInvalidQuantityChange(true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (nextQuantity > maxQuantity) {\n\t\t\tsetValidQuantity(maxQuantity); // Value capped at max quantity\n\t\t\treturn;\n\t\t}\n\n\t\tsetValidQuantity(nextQuantity);\n\t}\n\n\tfunction handleIncrement() {\n\t\tif (maxBelowMin) return;\n\t\tconst newValue = quantity + 1n;\n\t\tif (newValue >= maxQuantity) {\n\t\t\tsetValidQuantity(maxQuantity);\n\t\t} else {\n\t\t\tsetValidQuantity(newValue);\n\t\t}\n\t}\n\n\tfunction handleDecrement() {\n\t\tif (maxBelowMin) return;\n\t\tconst newValue = quantity - 1n;\n\t\tif (newValue <= MIN_QUANTITY) {\n\t\t\tsetValidQuantity(MIN_QUANTITY);\n\t\t} else {\n\t\t\tsetValidQuantity(newValue);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'flex w-full flex-col',\n\t\t\t\tclassName,\n\t\t\t\tdisabled && 'pointer-events-none opacity-50',\n\t\t\t)}\n\t\t>\n\t\t\t<Field>\n\t\t\t\t<FieldLabel htmlFor=\"quantity\" className=\"text-xs\">\n\t\t\t\t\tEnter quantity\n\t\t\t\t</FieldLabel>\n\n\t\t\t\t<NumericInput\n\t\t\t\t\taria-label=\"Enter quantity\"\n\t\t\t\t\tclassName=\"h-9 w-full rounded pr-0 [&>div]:pr-2 [&>input]:text-xs\"\n\t\t\t\t\tname={'quantity'}\n\t\t\t\t\tdecimals={0}\n\t\t\t\t\tcontrols={\n\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tdisabled={maxBelowMin || quantity <= MIN_QUANTITY}\n\t\t\t\t\t\t\t\tonClick={handleDecrement}\n\t\t\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\t\t\ticon={SubtractIcon}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tdisabled={maxBelowMin || quantity >= maxQuantity}\n\t\t\t\t\t\t\t\tonClick={handleIncrement}\n\t\t\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\t\t\ticon={AddIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\tvalue={displayQuantity}\n\t\t\t\t\tonChange={(e) => handleChangeQuantity(e.target.value)}\n\t\t\t\t\twidth={'full'}\n\t\t\t\t/>\n\t\t\t</Field>\n\n\t\t\t{invalidQuantity && maxQuantity > 0n && (\n\t\t\t\t<div className=\"mt-1.5 font-medium text-amber-500 text-xs\">\n\t\t\t\t\tInvalid quantity\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"mappings":";;;;;;AAuBA,MAAM,eAAe;AAErB,SAAwB,cAAc,EACrC,UACA,iBACA,kBACA,yBACA,aACA,WACA,YACsB;CACtB,MAAM,cAAc,cAAc;CAClC,MAAM,CAAC,eAAe,oBAAoB,SAAwB,KAAK;CAEvE,MAAM,kBAAkB,iBAAiB,SAAS,UAAU;CAE5D,MAAM,oBAAoB,UAAkB;AAC3C,mBAAiB,KAAK;AACtB,mBAAiB,MAAM;AACvB,0BAAwB,MAAM;;CAG/B,SAAS,qBAAqB,OAAe;AAC5C,MAAI,aAAa;AAChB,oBAAiB,MAAM;AACvB,2BAAwB,KAAK;AAC7B;;EAGD,IAAIA;AACJ,MAAI;AACH,kBAAe,OAAO,MAAM;UACrB;AACP,oBAAiB,MAAM;AACvB,2BAAwB,KAAK;AAC7B;;AAGD,MAAI,eAAe,cAAc;AAChC,oBAAiB,MAAM;AACvB,2BAAwB,KAAK;AAC7B;;AAGD,MAAI,eAAe,aAAa;AAC/B,oBAAiB,YAAY;AAC7B;;AAGD,mBAAiB,aAAa;;CAG/B,SAAS,kBAAkB;AAC1B,MAAI,YAAa;EACjB,MAAM,WAAW,WAAW;AAC5B,MAAI,YAAY,YACf,kBAAiB,YAAY;MAE7B,kBAAiB,SAAS;;CAI5B,SAAS,kBAAkB;AAC1B,MAAI,YAAa;EACjB,MAAM,WAAW,WAAW;AAC5B,MAAI,YAAY,aACf,kBAAiB,aAAa;MAE9B,kBAAiB,SAAS;;AAI5B,QACC,qBAAC;EACA,WAAWC,KACV,wBACA,WACA,YAAY,iCACZ;aAED,qBAAC,oBACA,oBAAC;GAAW,SAAQ;GAAW,WAAU;aAAU;IAEtC,EAEb,oBAAC;GACA,cAAW;GACX,WAAU;GACV,MAAM;GACN,UAAU;GACV,UACC,qBAAC;IAAI,WAAU;eACd,oBAAC;KACA,UAAU,eAAe,YAAY;KACrC,SAAS;KACT,MAAK;KACL,MAAM;MACL,EAEF,oBAAC;KACA,UAAU,eAAe,YAAY;KACrC,SAAS;KACT,MAAK;KACL,MAAM;MACL;KACG;GAEP,OAAO;GACP,WAAW,MAAM,qBAAqB,EAAE,OAAO,MAAM;GACrD,OAAO;IACN,IACK,EAEP,mBAAmB,cAAc,MACjC,oBAAC;GAAI,WAAU;aAA4C;IAErD;GAEF"}