{"version":3,"file":"token-balances.js","names":[],"sources":["../src/react/queries/collectible/queryKeys.ts","../src/react/queries/collectible/token-balances.ts"],"sourcesContent":["import { serializeBigInts } from '../../_internal/utils';\n\n/**\n * Creates a type-safe query key for collectible domain with automatic bigint serialization\n *\n * @param operation - The specific operation (e.g., 'balance', 'metadata')\n * @param params - The query parameters (will be automatically serialized)\n * @returns A serialized query key safe for React Query\n */\nexport function createCollectibleQueryKey<T>(operation: string, params: T) {\n\treturn ['collectible', operation, serializeBigInts(params)] as const;\n}\n","import type { Address } from 'viem';\nimport {\n\tbuildQueryOptions,\n\tgetIndexerClient,\n\ttype SdkQueryParams,\n\ttype WithOptionalParams,\n\ttype WithRequired,\n} from '../../_internal';\nimport { createCollectibleQueryKey } from './queryKeys';\n\nexport interface FetchTokenBalancesParams {\n\tcollectionAddress: Address;\n\tuserAddress: Address;\n\tchainId: number;\n\tincludeMetadata?: boolean;\n}\n\nexport type TokenBalancesQueryOptions =\n\tSdkQueryParams<FetchTokenBalancesParams>;\n\n/**\n * Fetches the token balances for a user\n *\n * @param params - Parameters for the API call\n * @returns The balance data\n */\nexport async function fetchTokenBalances(\n\tparams: WithRequired<\n\t\tTokenBalancesQueryOptions,\n\t\t'chainId' | 'collectionAddress' | 'userAddress' | 'config'\n\t>,\n) {\n\tconst { chainId, userAddress, collectionAddress, includeMetadata, config } =\n\t\tparams;\n\tconst indexerClient = getIndexerClient(chainId, config);\n\treturn indexerClient\n\t\t.getTokenBalances({\n\t\t\taccountAddress: userAddress,\n\t\t\tcontractAddress: collectionAddress,\n\t\t\tincludeMetadata: includeMetadata ?? false,\n\t\t\tmetadataOptions: {\n\t\t\t\tverifiedOnly: true,\n\t\t\t},\n\t\t})\n\t\t.then((res) => res.balances || []);\n}\n\nexport function getTokenBalancesQueryKey(params: TokenBalancesQueryOptions) {\n\tconst apiArgs = {\n\t\tchainId: params.chainId,\n\t\taccountAddress: params.userAddress,\n\t\tcontractAddress: params.collectionAddress,\n\t\tincludeMetadata: params.includeMetadata,\n\t\tmetadataOptions: params.userAddress\n\t\t\t? {\n\t\t\t\t\tverifiedOnly: true,\n\t\t\t\t}\n\t\t\t: undefined,\n\t};\n\n\treturn createCollectibleQueryKey('token-balances', apiArgs);\n}\n\n/**\n * Creates a tanstack query options object for the token balances query\n *\n * @param params - The query parameters\n * @returns Query options configuration\n */\nexport function tokenBalancesOptions(\n\tparams: WithOptionalParams<\n\t\tWithRequired<\n\t\t\tTokenBalancesQueryOptions,\n\t\t\t'chainId' | 'collectionAddress' | 'userAddress' | 'config'\n\t\t>\n\t>,\n) {\n\treturn buildQueryOptions(\n\t\t{\n\t\t\tgetQueryKey: getTokenBalancesQueryKey,\n\t\t\trequiredParams: [\n\t\t\t\t'userAddress',\n\t\t\t\t'collectionAddress',\n\t\t\t\t'chainId',\n\t\t\t\t'config',\n\t\t\t] as const,\n\t\t\tfetcher: fetchTokenBalances,\n\t\t},\n\t\tparams,\n\t);\n}\n"],"mappings":";;;;;;;;;;;;AASA,SAAgB,0BAA6B,WAAmB,QAAW;AAC1E,QAAO;EAAC;EAAe;EAAW,iBAAiB,OAAO;EAAC;;;;;;;;;;;ACgB5D,eAAsB,mBACrB,QAIC;CACD,MAAM,EAAE,SAAS,aAAa,mBAAmB,iBAAiB,WACjE;AAED,QADsB,iBAAiB,SAAS,OAAO,CAErD,iBAAiB;EACjB,gBAAgB;EAChB,iBAAiB;EACjB,iBAAiB,mBAAmB;EACpC,iBAAiB,EAChB,cAAc,MACd;EACD,CAAC,CACD,MAAM,QAAQ,IAAI,YAAY,EAAE,CAAC;;AAGpC,SAAgB,yBAAyB,QAAmC;AAa3E,QAAO,0BAA0B,kBAZjB;EACf,SAAS,OAAO;EAChB,gBAAgB,OAAO;EACvB,iBAAiB,OAAO;EACxB,iBAAiB,OAAO;EACxB,iBAAiB,OAAO,cACrB,EACA,cAAc,MACd,GACA;EACH,CAE0D;;;;;;;;AAS5D,SAAgB,qBACf,QAMC;AACD,QAAO,kBACN;EACC,aAAa;EACb,gBAAgB;GACf;GACA;GACA;GACA;GACA;EACD,SAAS;EACT,EACD,OACA"}