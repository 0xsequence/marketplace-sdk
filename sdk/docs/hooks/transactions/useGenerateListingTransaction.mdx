---
title: "useGenerateListingTransaction"
description: "Generates transaction steps for creating a marketplace listing This hook creates a mutation that calls the marketplace API to generate the necessary transaction steps for listing an NFT. It handles date conversion for expiry times and returns executable steps for the listing process."
sidebarTitle: "useGenerateListingTransaction"
category: "Transactions"
---

## Parameters

| Name | Type | Description |
|------|------|-------------|
| `params` |  | Configuration parameters |
| `params` |  | .chainId - The blockchain network ID for the listing |
| `params` |  | .onSuccess - Optional callback when generation succeeds |

## Returns

returns.data - The generated transaction steps when successful

## Example

Basic usage:
```typescript
const { generateListingTransactionAsync } = useGenerateListingTransaction({
chainId: 137
});
const steps = await generateListingTransactionAsync({
walletAddress: '0x...',
listing: {
tokenId: '123',
quantity: '1',
pricePerToken: '1000000000000000000', // 1 ETH in wei
currencyAddress: '0x...', // Currency contract address
expiry: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days
}
});
```

With marketplace fees:
```typescript
const { generateListingTransaction, isLoading } = useGenerateListingTransaction({
chainId: 1,
onSuccess: (steps) => {
console.log('Ready to create listing with steps:', steps);
executeSteps(steps);
}
});
generateListingTransaction({
walletAddress: account.address,
listing: {
tokenId: tokenId,
quantity: '1',
pricePerToken: ethers.parseEther('0.5').toString(),
currencyAddress: WETH_ADDRESS,
expiry: new Date('2024-12-31'),
marketplace: {
typeId: MarketplaceKind.sequence_marketplace_v2,
fee: 250 // 2.5% fee
}
}
});
```

